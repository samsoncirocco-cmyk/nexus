# Chrome Extension Development - Nexus

## Overview
Browser extension for saving web content and quick AI-powered content composition with direct integration to LinkedIn and X.

## Architecture

### Framework: Plasmo
- Modern browser extension framework with React + TypeScript
- Hot reloads during development
- Built-in content script/popup/background management
- Automatic manifest generation

### Project Structure
```
extension/
├── package.json          # Dependencies and scripts
├── tsconfig.json         # TypeScript configuration
├── manifest.json         # Extension manifest (auto-generated by Plasmo)
├── popup.tsx             # Main popup UI entry point
├── content.tsx           # Content scripts for web pages
├── background.ts         # Service worker
├── options.tsx           # Settings page
├── storage.ts            # Local storage wrapper
└── style.css             # Shared styles
```

## Features

### 1. Context Menu - "Save to Nexus"
- Right-click any selected text or image on page
- Saves to local storage with metadata (URL, title, timestamp, selection)
- Accessible via extension popup library

### 2. Quick Composer Popup
- Brain dump text input
- AI-powered content generation
- Platform-specific formatting (LinkedIn vs X)
- Character counters and previews

### 3. Platform Integration Buttons
- Inject "Post with Nexus" buttons on LinkedIn compose areas
- Inject "Post with Nexus" buttons on X/Twitter compose areas
- Seamless integration with existing UI

### 4. Saved Content Library
- Browse all saved content
- Filter by source (LinkedIn, X, manual)
- Search functionality
- Export options

## Permissions Required

```json
{
  "permissions": [
    "storage",
    "contextMenus",
    "activeTab",
    "scripting"
  ],
  "host_permissions": [
    "https://www.linkedin.com/*",
    "https://x.com/*",
    "https://twitter.com/*"
  ]
}
```

## Development Flow

1. Install dependencies: `npm install`
2. Run dev server: `npm run dev`
3. Load unpacked extension in Chrome
4. Test on target platforms
5. Build for production: `npm run build`

## Build Commands

| Command | Description |
|---------|-------------|
|`npm run dev`|Development with hot reload|
|`npm run build`|Production build|
|`npm run package`|Create Chrome Web Store zip|

## UI Components

### Popup Layout
- Header with logo/settings
- Tab navigation: Compose | Saved | Settings
- Quick compose form
- Saved items list
- Settings panel

### Content Script Injection
- Minimal DOM footprint
- CSS isolation via Shadow DOM
- Platform-specific selectors
- MutationObserver for dynamic content

## Data Model

```typescript
interface SavedItem {
  id: string;
  type: 'text' | 'image' | 'link';
  content: string;
  url: string;
  title: string;
  source: 'context_menu' | 'linkedin' | 'x' | 'manual';
  createdAt: number;
  tags: string[];
}

interface Settings {
  apiKey: string;
  defaultTone: 'professional' | 'casual' | 'witty';
  autoInject: boolean;
}
```

## Testing Checklist

- [ ] Context menu appears on right-click
- [ ] Content saves to storage correctly
- [ ] Popup opens without errors
- [ ] Composer generates content
- [ ] Buttons appear on LinkedIn
- [ ] Buttons appear on X
- [ ] Settings persist correctly
- [ ] Extension works across page navigations
